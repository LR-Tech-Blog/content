---
id: "turbo_terminal"
title: "Tunando o terminal: Customizando e melhorando o uso do prompt"
author: "Luan Roger"
date: 2023-12-22
draft: false
tags: 
- windows
- terminal
- prompt
- tui
- powershell
- starship
postType: "Tutorial"
description: "Se voc√™ acha que o terminal n√£o passa de um software antigo que s√≥ serve para executar comandos antigo, voc√™ est√° muito enganado. Vou mostrar como voc√™ pode customizar o seu terminal e torn√°-lo mais bonito e funcional."
image: {
    "src": "/images/posts/turbo_terminal/turbo_terminal.jpg",
    "alt": "Turbo Terminal Post Image"
}
---

import BrandIcon from "../../components/BrandIcon.astro"

# Chato e dif√≠cil

O terminal (aka. Console, aka. prompt) hoje em dia √© bastante dif√≠cil de usar, muito por conta dos programas com interface gr√°fica que facilita o uso de qualquer ferramenta e faz com que possamos executar tarefas rapidamente, o que nos faz pensar que o terminal j√° n√£o tem mais utilidade. 
Ainda usamos muito por conta que v√°rios programas como Node s√≥ s√£o usados em uma interface CLI (Command Line Interface), mas se n√£o fosse por esses casos, possivelmente, muitos de n√≥s n√£o veria mais a infame tela preta do terminal.

![Um terminal comum](/images/posts/turbo_terminal/boring_terminal.png)

Mas quero mostrar que hoje que o terminal tem bastante potencial para ser usado para muito al√©m disso e que para certas tarefas voc√™ vai preferir us√°-lo. 
Ent√£o vamos sair dessa simples tela preto e branco para um terminal que d√° gosto de ver e turbinado, usando alternativas modernas a comandos antigos.

![Meu preset de terminal com Starship no Windows Terminal](/images/posts/turbo_terminal/cool_terminal1.png)

![Meu preset de terminal com Starship no Windows Terminal](/images/posts/turbo_terminal/cool_terminal2.png)

# Pr√© requisitos

Antes de come√ßar, vou estar usando o  <BrandIcon brand="windows11"/>Windows 11 com <BrandIcon brand="powershell"/>PowerShell 7 no <BrandIcon brand="windowsterminal"/>Windows Terminal como cobaia, juntamente com o **scoop** para instalar o que vamos usar, ent√£o se voc√™ est√° usando outro shell ou outro sistema operacional, n√£o se preocupe, quase todas as ferramentas que vamos usar aqui √© multiplataforma.

Se voc√™ n√£o sabe qual a diferen√ßa entre CMD e PowerShell [veja este v√≠deo (ingl√™s)](https://learn.microsoft.com/pt-br/shows/one-dev-minute/what-is-the-difference-between-cmd-powershell-and-bash--one-dev-question).

## Instalar o Scoop

Antes de instalar o **scoop**, voc√™ precisar permitir a execu√ß√£o de scripts de terceiros no seu terminal, no PowerShell basta executar:
```shell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```
Agora para instalar o scoop:
```shell
Invoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression
```

Isso permitir√° instalar ele com as configura√ß√µes padr√µes, para op√ß√µes mais avan√ßadas, veja o [site oficial](https://scoop.sh).

Depois de instalar, voc√™ usa ele por meio da CLI, ent√£o para ver se ele foi instalado e os comandos b√°sico, basta executar:
```shell
scoop --help
```
> üí° V√°rios programas que tem interface em linha de comando possuem a flag `--help` para mostrar a sa√≠da de ajuda, ele acaba sendo √∫til tamb√©m se voc√™ quiser saber apenas se um programa est√° instalado.

Dessa forma, ele ir√° mostrar todos os comandos suportados por ele.

Agora que instalamos o nosso gerenciador de pacotes, vamos instalar o prompt customizado.

# Customizado o prompt

Aqui fica um pouco da sua prefer√™ncia, j√° que nessa categoria existem v√°rios programas que servem este prop√≥sito. 
Minha prefer√™ncia √© o <BrandIcon brand="starship"/>Starship, que j√° uso a bastante tempo e migrei do Oh My Posh para ele, ao final desta se√ß√£o falo mais sobre isso.

## Instalar o Starship
Ent√£o vamos come√ßar usando o scoop para instalar o Starship:
```shell
scoop install starship
```

Quando terminar voc√™ vai notar que n√£o mudou nada, isso porqu√™ ele, como qualquer outro, tamb√©m √© um programa que temos que inicializar.
Queremos que ele inicie sempre que n√≥s abrirmos nosso shell, para isso devemos modificar o script de perfil, que √© chamado toda vez que abrimos uma nova se√ß√£o no terminal, no caso do PowerShell, voc√™ pode verificar o caminho desse script na vari√°vel $PROFILE dessa forma:
```shell
echo $PROFILE
```
> üí° Esta etapa pode variar de acordo do seu shell, pesquise qual script ele executa quando uma nova se√ß√£o √© iniciada nele.

Caso n√£o exista nada no caminho da vari√°vel `$PROFILE` voc√™ pode criar. Note que ele tamb√©m fala o nome do arquivo, ent√£o ele deve ser criado tamb√©m com o mesmo nome (geralmente `Microsoft.PowerShell_profile.ps1`).

J√° no arquivo devemos iniciar o Starship dessa forma:
```powershell
Invoke-Expression (&starship init powershell)
```
*Arquivo: `Microsoft.PowerShell_profile.ps1`*

Agora basta reiniciar sua se√ß√£o no terminal (fechar e abrir de novo) e o Starship j√° vai iniciar.

Se voc√™ estiver em algum projeto no seu computador, ele deve reconhecer a vers√£o do runtime que voc√™ usa para rodar o projeto, al√©m tamb√©m de algumas informa√ß√µes do <BrandIcon brand="git"/>Git.

![Resultado at√© agora](/images/posts/turbo_terminal/result_after_starship.png)

### Corrigindo as fontes

Mas veja que alguns caracteres n√£o est√£o sendo reconhecidos, isso √© por conta da fonte que n√£o tem determinados caracteres, para corrigir isso existe uma s√©rie de fontes chamadas [NerdFonts](https://www.nerdfonts.com).

Acesse a [pagina de download](https://www.nerdfonts.com/font-downloads) das fontes e escolha uma da sua prefer√™ncia (todas possuem os caracteres que queremos), pessoalmente eu uso a FiraCode Nerd Font. 
Depois de baixado, instale e aplique no seu terminal.

![Mudando a fonte no Windows Terminal](/images/posts/turbo_terminal/change_font.gif)

### Personaliza√ß√µes pessoal

Tamb√©m gosto de mudar a espessura da fonte para Extra-Bold. O plano de fundo √© um wallpaper do Final Fantasy IV (Pixel Remaster), note que nem todo terminal suporta mudar o plano de fundo, mas daqui pra frente irei usar meu perfil principal do Windows Terminal, se quiser copiar, acesse o [link do Gist](https://gist.github.com/LuanRoger/04b394c87e07e6315e50016ce6ac17d7).

## Customizando o Starship

O Startship pode ser configurado para exibir diferentes informa√ß√µes, como uso de mem√≥ria, SO, bateria (j√° que estou usando um notebook), al√©m tamb√©m da vers√£o do runtime do projeto e muitas outras configura√ß√µes.

![Starship com algumas configura√ß√µes](/images/posts/turbo_terminal/starship_preferences.png)

Ele √© configurado por um arquivo `.toml` que, se voc√™ esta no Windows, ele fica em `~/.config/starship.toml` (lembre que o `~` √© equivalente a `$HOME`), se este arquivo n√£o existir, voc√™ pode cria-lo.

Na documenta√ß√£o do Starship tem a se√ß√£o [Configurations](https://starship.rs/config) onde est√° TUDO que √© poss√≠vel configurar nele, mas se n√£o quiser colocar tudo manual, n√£o tem problema, em [Presets](https://starship.rs/presets) tem v√°rias configura√ß√µes prontas e que algumas, modificam at√© a forma que as informa√ß√µes s√£o exibidas. 
Fiz a minha configura√ß√£o baseada no [Nerd Font Symbols Preset](https://starship.rs/presets/nerd-font.html) com algumas coisas a mais, se quiser copiar, aqui esta o [link do Gist](https://gist.github.com/LuanRoger/a7de7f75983e59a13ea7382c36876564).

## Porqu√™ deixei de usar o Oh My Posh

Um r√°pido relato, a primeira ferramenta de customiza√ß√£o do prompt que usei foi o Oh My Posh, ele tem bem mais ‚Äúm√≥dulos‚Äù do que o Starship, desde de um m√≥dulo que fala a m√∫sica que voc√™ est√° ouvindo no <BrandIcon brand="spotify"/>Spotify at√© um m√≥dulo de clima.

Mas ele tornava o terminal bastante lento se voc√™ colocasse v√°rios m√≥dulos para funcionar, depois de um comando, ele carregava as informa√ß√µes que os m√≥dulos exibiam por v√°rios segundos e tornava a experi√™ncia bastante lenta.

Ent√£o (ao inv√©s de remover os m√≥dulos) acabei por mudar para o Starship que mesmo com poucas configura√ß√µes sobre o seu ambiente, acaba por ser mais agrad√°vel de usar. 
Recomendo experimentar o Oh My Posh como alternativa ao Starship.

# Ferramentas

N√£o poderia falar sobre o terminal sem citar algumas ferramentas valiosas que ajudam (e muito) a executar tarefas nesse ambiente, at√© porque, o terminal √© bastante antigo e muitos dos utilit√°rios que us√°vamos no passado prevalecem at√© hoje, ent√£o vou listar algumas ferramentas que uso diariamente e outras que j√° usei (para que voc√™ n√£o tenha que procurar por mais).

### Definir sin√¥nimos

Em todo terminal, √© poss√≠vel definir sin√¥nimos (Alias) para comandos, isso permite que voc√™ associe determinada palavra com um programa. 
Por exemplo, voc√™ pode definir que a palavra `arquivos` execute o comando `ls`. 
Por praticidade, tente criar sin√¥nimos que s√£o mais curtos do que o comando original.

Para criar um alias voc√™ pode usar o comando `Set-Alias`:
```powershell
Set-Alias -Name ls -Value lsd
```
*Arquivo: `Microsoft.PowerShell_profile.ps1`*

O `Set-Alias` vai criar um sin√¥nimo apenas para a sess√£o atual, isso significa que se voc√™ fechar o terminal e abrir de novo, o sin√¥nimo  n√£o ir√° mais funcionar. 
Para corrigir isso, voc√™ deve especificar este comando no arquivo `Microsoft.PowerShell_profile.ps1`, dessa forma, ele vai atribuir todos os sin√¥nimos sempre que iniciar uma se√ß√£o.

## [lsd](https://github.com/lsd-rs/lsd)

Voc√™ j√° deve ter notado nas se√ß√µes anteriores, o comando `ls` tem uma sa√≠da diferente do seu, isso porque estou usando uma ferramenta espec√≠fica para linhas de comando como alternativa ao `ls`, o `lsd` (LSDeluxe) pode organizar os arquivos em diferentes layouts, exibir √≠cones (por meio do Nerd Fonts) diferentes dependendo do tipo de arquivo ou diret√≥rio, colori cada informa√ß√£o al√©m de ser altamente configur√°vel e customiz√°vel.

![Demo lsd](/images/posts/turbo_terminal/lsd_demo.gif)

## [micro](https://github.com/zyedidia/micro)

Pra voc√™ que nunca se acostumou com os controles e atalhos confusos do Vim, ent√£o essa √© uma √≥tima alternativa, simples, intuitiva e f√°cil de usar. 
Veio para ser mais um sucessor do nano do que do vim, mas para quem sente a necessidade de fazer aquela edi√ß√£o r√°pida em um arquivo e n√£o quer abrir o VSCode ou a IDE pra isso, ent√£o d√™ uma chance ao micro.

O micro tem um mapeamento de teclas padr√£o bem familiar como Crtl-S para salvar, Crtl-Z para desfazer, Crtl-C / Crtl-V para corrigir aquele erro e o Crtl-Q para sair, al√©m de suporte a mouse, a plugins (feitos em <BrandIcon brand="lua"/>Lua), a mais de 130 linguagens e divis√£o entre arquivos na mesma tela.

![Demo micro](/images/posts/turbo_terminal/micro_demo.gif)

## [bat](https://github.com/sharkdp/bat)

Esta √© um crucial que n√£o pode faltar, se voc√™ conhece o comando `cat` para exibir o conte√∫do de um arquivo no terminal ent√£o sabe que ele √© bastante limitado, principalmente no quesito visualiza√ß√£o.

O `bat` veio como alternativa a este comando, ele possui *syntax highlighting* para diferentes linguagens, mostra o n√∫mero de linha, tem integra√ß√£o com Git, mostra arquivos *diff* e mais.

![Demo bat](/images/posts/turbo_terminal/bat_demo.gif)

## [glow](https://github.com/charmbracelet/glow)

Como complemento do `bat`, este renderiza <BrandIcon brand="markdown"/>Markdown no seu terminal, bastante √∫til para ler README dos projetos que voc√™ clonou a algum tempo e j√° n√£o sabe o que √©, ent√£o abre o README para ver do que se trata.

Al√©m de uma interface CLI, ele tem uma TUI (Terminal User Interface) que basta s√≥ digitar `glow` (sem argumentos) para acess√°-lo, nele voc√™ consegue ver os arquivos Markdown no diret√≥rio atual, novidades do programa e gerenciar seus stashes, pois o `glow` tem suporte a *stashing* de arquivos, voc√™ pode salvar o estado dos seus arquivos, modific√°-los e os stashes v√£o permanecer o mesmo.

![Demo glow](/images/posts/turbo_terminal/glow_demo.gif)

## [tiptop](https://github.com/nschloe/tiptop)

Este √© um daqueles que voc√™ vai quere sempre deixar uma aba aberto no terminal. 
O `tiptop` √© uma ferramenta de monitoramento de sistema, inspirado no antigo comando `top` dos Unix, ele tem uma bela interface, mostrando gr√°ficos e hist√≥rico de m√©tricas do sistema como uso de CPU, memoria, disco e rede, al√©m dos processo em execu√ß√£o.

![Demo tiptop](/images/posts/turbo_terminal/tiptop_demo.png)

Diferente das outras ferramentas, esta n√£o est√° dispon√≠vel no `scoop` ela foi criada em <BrandIcon brand="python"/>Python e n√£o possui bin√°rios para serem executados. 
Voc√™ pode simplesmente clonar o reposit√≥rio do tiptop e executar a partir dele ou instal√°-lo usando o `pip` com o seguinte comando:
```shell
pip install tiptop
```

## [duf](https://github.com/muesli/duf)

`duf` √© a abrevia√ß√£o de Disk Usage/Free Utility e faz exatamente o que seu nome diz, utilit√°rio que verifica o uso de espa√ßo em disco, proposta bem simples mas √© aquele tipo de utilit√°rio que √© sempre bom ter a disposi√ß√£o.

![Demo duf](/images/posts/turbo_terminal/duf_demo.png)

## [code-radio-cli](https://github.com/JasonWei512/code-radio-cli)

Sabia que seu terminal tamb√©m pode tocar m√∫sica? 
Ele n√£o s√≥ toca m√∫sica como sintoniza com uma esta√ß√£o de r√°dio online para isso, quando vi isso pela primeira vez fiquei surpreso e acabei usando mais do que eu gostaria. 
Como j√° disse, ele usa as m√∫sicas da [radio online do <BrandIcon brand="freecodecamp"/>freeCodeCamp](https://coderadio.freecodecamp.org), ent√£o a maioria das m√∫sicas s√£o varia√ß√µes do LoFi (o que n√£o √© ruim), vale a pena voc√™ dar uma olhada se escuta m√∫sica enquanto programa.

![Demo code-radio-cli](/images/posts/turbo_terminal/code-radio-cli_demo.png)

## lazydocker

O <BrandIcon brand="docker"/>Docker √© uma das ferramentas obrigat√≥rias que todo desenvolvedor deve saber e se n√£o sabe, procurar aprender. 
Para quem j√° usa sabe sua import√¢ncia mas ao mesmo tempo sabe que a CLI dele poderia ser melhor, principalmente para fazer as pessoas sa√≠rem do Docker Desktop e usar mais a CLI, at√© porque em servidores, n√£o temos interface gr√°fica.

Para facilitar este processo, o lazydocker torna mais f√°cil gerenciar cont√™ineres, imagens, volumes, praticamente tudo, por uma simples TUI, mesmo quem j√° sabe a CLI prefere usar pelo lazydocker e n√£o vou julgar, dependendo da tarefa pode ser sim mais r√°pido.

![Demo lazydocker](/images/posts/turbo_terminal/lazydocker_demo.gif)

# Men√ß√µes honrosas

Estas s√£o ferramentas que j√° usei ou que me chamou aten√ß√£o pela proposta e que acho bom mencionar.

## [dune](https://github.com/adam-mcdaniel/dune)

Este √© um projeto que me impressionou bastante pela quantidade de coisas que voc√™ pode fazer. 
`dune` √© um shell assim como o [Bash](https://pt.wikipedia.org/wiki/Bash) no <BrandIcon brand="linux"/>Linux, mas o dune tem at√© sua pr√≥pria linguagem com suporte a lambdas, macros e mais, al√©m de uma biblioteca padr√£o bastante completa, mas o que pode chamar aten√ß√£o √© sua apresenta√ß√£o quando inicia, podendo ser customizado com frases, clima, calend√°rio, hora, etc.

<script async id="asciicast-441120" src="https://asciinema.org/a/441120.js"></script>
*Apresenta√ß√£o do `dune` pelo pr√≥prio criador, veja o reposit√≥rio do projeto no <BrandIcon brand="github"/>GitHub.*

## [hyperfine](https://github.com/sharkdp/hyperfine)

Este √© bem nichado, mas bastante, ele mensura (benchmark) a os comandos do terminal, provendo est√°ticas de diferentes execu√ß√µes, ao final ele mostra a media entre cada execu√ß√£o.

![Demo hyperfine](/images/posts/turbo_terminal/hyperfine_demo.gif)

## [lazygit](https://github.com/jesseduffield/lazygit)
> Dos mesmos criadores de lazydocker, vem a√≠, lazygit.

Este tem o mesmo prop√≥sito do lazydocker mas para o Git, a interface √© bastante familiar para quem j√° usa. 
O Git tem um prop√≥sito bem definido, mas que em cima disso, tem v√°rias outras funcionalidades, ent√£o fica dif√≠cil de lembrar comandos al√©m dos b√°sicos, ent√£o vamos deixar isso para os GUI mas sem sair do terminal. 
O lazygit torna r√°pido e intuitivo gerenciar um reposit√≥rio local ou remoto, provendo as funcionalidades b√°sicas e uma visualiza√ß√£o que o Git (CLI) n√£o prov√™ para os commits.

Pessoalmente n√£o uso Git no terminal, uso o GitKraken ~~, btw~~ mas por costume de uma GUI, j√° que antes vinha usando o GitHub Desktop, mas vale a pena d√° uma chance ao lazygit, principalmente se voc√™ usa o Git diariamente no terminal, pode tornar algumas tarefas mais r√°pida.

![Demo lazygit](/images/posts/turbo_terminal/lazygit_demo.gif)
*Apresenta√ß√£o do pr√≥prio reposit√≥rio do projeto.*

# Sugest√µes

O blog n√£o tem uma se√ß√£o de coment√°rios ainda, ent√£o voc√™ pode interagir na aba de discuss√µes do GitHub no reposit√≥rio de conte√∫do do blog.

Ent√£o se usa alguma ferramenta que n√£o foi listada aqui, n√£o deixe de citar por l√°.

***Peace‚úåÔ∏è & Merry ChristmasüéÑ***